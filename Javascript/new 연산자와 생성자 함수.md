# new 연산자와 생성자 함수

객체 리터럴 `{...}`을 사용하면 객체를 쉽게 만들 수 있습니다. 

그러나 유사한 객체를 여러 개 만들어야 할 때가 생기곤 합니다. 

이 때 `new` 연산자와 생성자 함수를 사용하면 유사한 객체 여러 개를 쉽게 만들 수 있습니다. 

### 생성자 함수

생성자 함수는 아래 두 관례를 따릅니다.

1. 함수 이름의 첫 글자는 **대문자**로 시작합니다. 
2. 반드시 `new` 연산자를 붙여 실행합니다. 

생성자 함수를 사용한 객체 생성 예시입니다. 

```jsx
function User(name) {
	// this = {}; (빈 객체가 암시적으로 만들어집니다)

	// 새로운 프로퍼티를 this에 추가합니다. 
  this.name = name;
  this.isAdmin = false;

	// return this; (this가 암시적으로 반환됩니다)
}

let user = new User("보라");

alert(user.name); // 보라
alert(user.isAdmin); // false
```

위의 코드를 실행하면 아래와 같이 동작합니다. 

1. 빈 객체를 만들어 `this`에 할당
2. 함수 본문을 실행. `this`에 새로운 프로퍼티를 추가해 `this` 수정
3. `this` 반환

> 모든 함수는 생성자 함수가 될 수 있습니다. 
`new`를 붙여 실행한다면 어떤 함수라도 위와 같이 동작합니다. 주의할 점은 첫 글자를 대문자로 해야 한다는 점입니다.
> 

### 생성자와 return문

생성자 함수엔 보통 `return`문이 없습니다. 반환해야 할 것들은 모두 `this`에 저장하고, `this`는 자동으로 반환되기 때문에 반환문을 명시적으로 써 줄 필요가 없습니다. 

만약 `return`문이 있을 경우 아래와 같은 규칙이 적용됩니다. 

- 객체를 `return` 한다면 `this` 대신 객체가 반환 됩니다.
    
    ```jsx
    function BigUser() {
      this.name = "원숭이";
      return { name: "고릴라" };  // <-- this가 아닌 새로운 객체를 반환함
    }
    
    alert( new BigUser().name );  // 고릴라
    ```
    
- 원시형을 `return` 한다면 `return`문이 무시됩니다.
    
    ```jsx
    function SmallUser() {
      this.name = "원숭이";
      return; // <-- this를 반환함
    }
    
    alert( new SmallUser().name );  // 원숭이
    ```
    

`return`문이 있는 생성자 함수는 거의 없습니다. 

### 생성자 내 메서드

생성자 함수를 사용하면 매개변수를 이용해 객체 내부를 자유롭게 구성할 수 있습니다. 

`new` 연산자 내에 프로퍼티 뿐만 아니라 메서드도 추가할 수 있습니다.
