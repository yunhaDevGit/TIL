class Solution {
    public String solution(String new_id) {
         String answer = new_id.toLowerCase();

        answer = new_id.replaceAll("[^0-9a-z._-]","");

        answer = new_id.replaceAll("[.]{2,}", ".");

        answer = new_id.replaceAll("^[.][.]$","");

        if(new_id.isEmpty()) {
            new_id = "a";
        }

        if(new_id.length()>=16){
            answer = new_id.substring(0,15);
            if(answer.substring(answer.length()-1).equals("."))
                answer = new_id.substring(0,14);
        }

        if(new_id.length()<=2){
            while (answer.length()!=3)
                answer = answer + answer.substring(answer.length()-1, answer.length());
        }

        return answer;
    }
}
