# 식별자

## 식별자 개념

여러 개의 집합체를 담고 있는 하나의 통에서 각각을 구분할 수 있는 논리적인 이름을 식별자(Identifier)라고 한다.

식별자란 하나의 엔터티에 구성된 여러 개의 속성 중 엔터티를 대표할 수 있는 속성을 의미하며, **하나의 엔터티는 반드시 하나의 유일한 식별자가 존재**해야 한다.

식별자와 키(Key)를 동일하게 생각할 수 있지만, 식별자는 논리 데이터 모델링 단계에서 사용하고 키는 데이터베이스 테이블에 접근을 위한 매개체로 물리 데이터 모델링 단계에서 사용한다.

## 식별자의 특징

### 주식별자의 특징

- ********************유일성 :******************** 주식별자에 의해 헨터티 내에 모든 인스턴스들이 유일하게 구분되어야 한다
- ******************최소성 :****************** 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 한다
- ******************불변성 :****************** 지정된 주식별자의 값은 자주 변하지 않는 것이어야 한다
- ******************존재성 :****************** 주식별자가 지정되면 반드시 값이 들어와야 한다

### 대체식별자

- 주식별자의 특성과 일치

### 외부식별자

- 참조무결성 제약조건(Referential Integrity)에 따른 특징을 가진다

## 식별자 분류 및 표기법

### 식별자 분류

- **대표성 여부**
    - **주식별자** : 엔터티 내에서 각 어커런스를 구분할 수 있는 구분자, 타 엔터티와 참조관계를 연결할 수 있는 식별자
    - **보조식별자** : 엔터티 내에서 각 어커런스를 구분할 수 있는 구분자이지만 대표성을 가지지 못해 참조 관계 연결 못함
- **스스로 생성 여부**
    - 내부 식별자 : 엔터티 내부에서 스스로 만들어지는 식별자
    - 외부 식별자 : 타 엔터티와의 관계를 통해 타 엔터티로부터 받아오는 식별자
- **속성 수**
    - 단일 식별자 :  하나의 속성으로 구성된 식별자
    - 복합 식별자 :  둘 이상의 속성으로 구성된 식별자
- **대체 여부**
    - 본질 식별자 :  업무에 의해 만들어지는 식별자
    - 인조 식별자 : 업무적으로 만들어지지는 않지만 원조 식별자가 복잡한 구성을 갖고 있기 때문에 인위적으로 만든 식별자

## 주식별자 도출 기준

- 해당 업무에서 자주 이용되는 속성을 주식별자로 지정한다
- 명칭, 내역 등과 같이 이름으로 기술되는 것들은 가능하면 주식별자로 지정하지 않는다
- 복합으로 주식별자로 구성할 경우 너무 많은 속성이 포함되지 않도록 한다

## 식별자 관계와 비식별자 관계에 따른 식별자

### 식별자관계와 비식별자관계의 결정

외부식별자(Foreign Identifier)는 자기 자신의 엔터티에서 필요한 속성이 아닌 다른 엔터티와의 관계를 통해 자식 쪽에서 생성되는 속성이다. 

엔터티 사이의 관계 유형은 업무 특징, 자식 엔터티의 주식별자 구성, SQL 전략에 의해 결정된다.

### 식별자 관계

부모로부터 받은 식별자를 자식 엔터티의 주식별자로 이용할 경우 NULL이 오면 안되므로 반드시 부모 엔터티가 생성되어야 자기 자신의 엔터티가 생성된다. 

자식 엔터티의 주식별자로 부모의 주식별자가 상속되는 경우를 식별자관계(Identifying Relationship)이라고 한다.  

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/75dba645-6325-4b59-aad6-1cdf51b8e0c7/Untitled.png)

### 비식별자 관계

부모 엔터티로부터 속성을 받았지만 자식 엔터티의 주식별자로 사용하지 않고 일반적인 속성으로만 사용하는 경우를 비식별자관계(Non-Identifying Relationship)이라고 한다. 

아래의 네가지 경우에 비식별자 관계에 의한 외부 속성을 생성한다

- 부모 없는 자식이 생성될 수 있는 경우
- 엔터티별로 데이터 생명주기를 다르게 관리할 경우
- 여러 개의 엔터티가 하나의 엔터티로 통합 표현되었는데 각각의 엔터티가 별도의 관계를 가질 경우
    - 예) 인터넷 접수, 내방접수, 전화접수가 하나로 통합되어 표현된 경우
- 자식엔터티에 주식별자로 사용해도 되지만 자식 엔터티에서 별도의 주식별자를 만드는게 유리하다고 판단될 경우

### 식별자 관계로만 설정할 경우의 문제점

데이터 모델의 흐름이 길어질수록 PK 속성 수가 증가하게 된다

→ 개발 복잡성과 오류를 유발

### 비식별자관계로만 설정할 경우의 문제점

속성이 상속되지 않아 자식엔터티에서 데이터를 처리할 때 쓸데없이 부모 엔터티까지 찾아가야 하는 경우 발생

→ 불필요한 조인이 많아지면서 SQL 구문도 길어지고 성능도 저하

### 식별자관계와 비식별자관계 모델링

**1) 비식별자관계 선택 프로세스**

기본적으로 식별자관계로 모든 관계가 연결되면서 아래의 조건에 해당할 경우 비식별자관계로 조정하면 된다

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a6ab468b-b899-4509-ac3e-25021f154c0f/Untitled.png)

자식 엔터티의 독립된 주식별자 구성이 필요한지 분석하는 부분이 중요하다.

******************************2) 식별자와 비식별자관계 비교******************************
