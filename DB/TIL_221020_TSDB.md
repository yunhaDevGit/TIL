# TSDB (시계열 데이터베이스)

## 1. 시계열 데이터베이스(TSDB, Time Series Database)란?

Time-Stamped Data라고도 불리는 Time Seriese Data(시계열 데이터)는 **시간에 따라 저장된 데이터**를 의미합니다. 시계열 데이터들은 동일한 소스로부터 시간이 지남에 따라 만들어진 데이터들로 구성되므로 시간 경과에 따른 변화를 추적하는 용이합니다. 시계열 데이터는 단순히 시간에 따라 모니터링, 다운 샘플링 및 집계되는 데이터로 서버 매트릭, 성능 모니터링, 네트워크 데이터 등 여러 유형의 분석 데이터가 될 수 있습니다. 

시계열 데이터베이스란 시계열 데이터를 처리하기 위해 최적화된 데이터베이스로써 빠르고 정확하게 실시간으로 쌓이는 대규모 데이터들을 처리할 수 있도록 도안 되었습니다.

TSDB는 데이터들과 시간이 함께 저장하는데, 이를 통해 **시간의 흐름에 따라 데이터를 분석하기에 매우 용이**합니다. 과거의 데이터를 시간과 함께 기록용으로 저장하므로 주된 작업은 INSERT와 DELETE이며 UPDATE가 아닙니다.

## 2. 시계열 데이터베이스의 중요성 및 증가 추세

TSDB가 중요한 이유는 오늘날 엄청나게 많은 데이터들이 수집 되기 때문인데, 수많은 데이터들을 처리하기에는 관계형 데이터베이스와 NoSQL로 한계가 있기 때문입니다. 

DB Engines에서 최근 2년간 데이터를 살펴보면 TSDB가 엄청난 속도로 증가하고 있음을 할 수 있는데 그 이유는 빅데이터 시대에 대용량의 데이터를 빠르게 처리하기에 적합하기 때문입니다. 

![image](https://user-images.githubusercontent.com/74949294/196978386-6e7f9a3b-1b0b-473f-a494-cdb56269c9b6.png)


## 3. 시계열 데이터베이스 특징

[시간을 기반으로 하는 저장 공간]

시계열 데이터베이스는 기존의 다른 데이터베이스들과는 핵심적인 아키텍처 디자인 특징이 있는데, 바로 time-stamp를 기반으로 하는 저장소를 가지고 있다는 것입니다. 

이를 통해 데이터를 압축하고 요약하는 등의 작업을 진행하여 대규모 시간 기반 데이터들을 다룰 수 있고, 시간을 기반으로 하는 쿼리를 가능하게 합니다. 

![image](https://user-images.githubusercontent.com/74949294/196978458-8a6636d4-871e-4dc9-b2f3-9da29a4e2a46.png)


위의 그림은 InfluxDB의 데이터 저장 구조로 시간을 기반으로 데이터를 분할 저장함으로써 메모리에 로드되는 데이터의 양 자체를 줄일 수 있습니다. 또한 최적화된 압축 알고리즘을 사용하여 이러한 비용을 최소화 합니다.

[빠른 처리 속도]

TSDB는 빠르고 효율적인 방법으로 데이터를 수집하기 위해 만들어졌다. 물론 RDB도 빠르지만 데이터의 양이 증가함에 따라 성능이 급격하게 느려지는 경향이 있습니다. 특히 테이블에 인덱싱이 걸려 있다면 인덱싱 재정렬 등에 의해 퍼포먼스는 점점 더 떨어지게 됩니다. 

반면 TSDB에서의 인덱스는 시간에 따라 축적된 데이터들에 최적화 되었기 때문에, 시간이 지나도 데이터를 수집하는 속도가 느려지지 않고 빠른 처리 속도를 보여줍니다. 

![image](https://user-images.githubusercontent.com/74949294/196978512-75cb5b6e-cfee-4005-ab89-437c4717e2d7.png)


[다양한 자동화된 기능 제공]

TSDB에는 시간에 따라 변화되는 데이터들을 저장하므로 데이터의 양이 상당히 많으며, 시간에 따른 데이터의 요약 또는 통계 등과 같은 작업이 흔히 요구됩니다. 

예를 들어 회사의 주가가 지난 6개월 대비 몇 퍼센트 데이터가 증가하였는지 등과 같은 것들입니다. 

TSDB는 이렇게 특정 주기마다 자동으로 데이터들을 처리하는 기능(InfluxDB의 Continous Query, 연속적인 쿼리)이나 오래된 데이터를 자동으로 삭제하도록 도와주는 기능(InfluxDB의 Retention Policy, 보존 정책) 등을 제공함으로써 편리성을 제공하고 있습니다. 

물론 이 외에도 여러가지 단점 또는 데이터베이스를 시간에 최적화 하기 위한 Trade-Off 들이 있습니다. 

- INSERT와 SELECT에 최적화되어 DELETE나 UPDATE에 대한 기능이 상당히 제한적입니다.
- 시간에 따라 데이터를 오름차순으로 정렬하므로 임의의 시간으로 데이터를 읽고 쓰는 작업(Read/Write) 성능이 떨어집니다.
- 대량의 데이터가 쓰여지도록 최적화되어 DB에 부하가 걸린 경우 항상 최신의 데이터를 반환하지 못할 수 있습니다.
