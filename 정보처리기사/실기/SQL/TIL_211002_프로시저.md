# 프로시저(Procedure)

- **SQL을 사용하여 작성한 일련의 작업을 저장**해두고 **호출을 통해 원할 때마다 저장한 작업을 수행하도록 하는 절차형 SQL**



### 프로시저의 구성

```SQL
DECLARE (필수) - 프로시저 명칭, 변수, 인수, 데이터타입을 정의하는 선언부
BEGIN (필수) - 프로시저 시작
	CONTROL - 조건문 또는 반복문이 삽입되어 순차적으로 처리
	SQL - DML, DCL이 삽입되어 데이터 관리 작업
	EXCEPTION - BEGIN~END 구문 실행 시 예외 처리
	TRANSACTION - 수행된 작업을 DB에 적용 여부 결정
END (필수) - 프로시저 종료
```



#### 프로시저 생성

```SQL
CREATE [OR REPLACE] PROCEDURE 프로시저명(파라미터)
[지역변수 선언]
BRGIN
	프로시저 BODY;
END;
```

- OR REPLACE : 동일한 프로시저 이름이 이미 존재하는 경우, 기존 프로시저 대체

- 파라미터 

  - IN : 호출 프로그램이 프로시저에게 값을 전달할 때 지정
  - OUT : 프로시저가 호출 프로그램에게 값을 반환할 때 지정
  - INOUT : 호출 프로그램이 프로시저에게 값을 전달하고 프로시저가 호출 프로그램에게 값을 반환할 때 지정
  - 매개변수명 : 호출 프로그램으로부터 전달받은 값을 저장할 변수 이름 지정
  - 자료형 : 변수의 자료형

  


  '사원번호'를 입력받아 해당 사원의 '지급방식'을 'S'로 변경하는 프로시저

  ```SQL
  CREATE OR REPLACE PROCEDURE emp_change_s(i_사원번호 IN INT)
  IS
  BEGIN
  	UPDATE 급여 SET 지급방식='S' WHERE 사원번호=i_사원번호;
  	EXCEPTION
  		WHEN PROGRAM_ERROR THEN 
  			ROLLBACK;
  	COMMIT;
  END;
  ```

  

### 프로시저 실행

```SQL
EXECUTE 프로시저명;
EXEC 프로시저명;
CALL 프로시저명;
```



### 프로시저 제거

```SQL
DROP PROCEDURE 프로시저명
```

