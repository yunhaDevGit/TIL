#### SQL 분류 (DDL, DML,DQL,DCL)

| 구분               | 설명                                                         | 명령어                          |
| ------------------ | ------------------------------------------------------------ | ------------------------------- |
| 데이터 질의어(DQL) | 데이터베이스에 **저장된 데이터를 검색**하는데 사용하는 질의어 | SELECT                          |
| 데이터 조작어(DML) | 데이터베이스에 **저장된 데이터를 수정, 삭제, 추가**하는 명령어 | INSERT, UPDATE, DLETE           |
| 데이터 정의어(DDL) | 데이터베이스 **객체를 생성하고 수정, 삭제**하는 명령어<br />데이터베이스의 **스카마를 정의, 스키마에 대한 명세를 시스템 카탈로그에 저장** | CREATE, ALTER, DROP             |
| 데이터 제어어(DCL) | 데이터베이스의 **규정이나 기법을 정의하고 제어**하는 언어<br />사용자 권한 부여/취소, 트랜잭션 제어 | GRANT, REVOKE, COMMIT, ROLLBACK |



#### 데이터베이스 스키마

| 스키마                         | 설명                                                         | 비고                           |
| ------------------------------ | ------------------------------------------------------------ | ------------------------------ |
| 외부 스키마(External Schema)   | 각 사용자나 응용 프로그래머가 접근하는 데이터베이스<br />하나의 데이터베이스에 여러개의 외부 스키마 존재 | 여러개 존재<br />서브스키마 뷰 |
| 개념 스키마(Conceptual Schema) | 모든 응용시스템과 사용자가 필요로하는 데이터를 통합한 데이터베이스<br />모든 개체, 관계, 제약조건, 접근 권한, 보안, 무결성 규칙 포함 | 하나만 존재                    |
| 내부 스키마(Internal Schema)   | 저장 장치 측면에서의 데이터베이스 저장 구조<br />내부 레코드 형식, 인덱스 유므, 내부 레코드 순서 | 물리적 스키마                  |

-> SELECT 문은 DQL로 분류하거나 DML에 포함하기도 한다.





#### 시스템 카탈로그

- 시스템 카탈로그(데이터 사전) 또는 시스템 테이블이라고도 하며, 데이터베이스의 객체(사용자, 릴레이션, 뷰, 인덱스, 권한 등)와 구조들에 관한 모든 데이터를 포함하는 시스템 테이블이다
- 시스템 카탈로그는 사용자 릴레이션처럼 SELECT 문을 사용하여 내용을 검색할 수 있지만 직접 갱신할 수는 없다
- DBMS는 시스템 카탈로그에 릴레이션, 인덱스, 사용자, 권한 등 각 스키마 객체 유형별로 별도의 정보 테이블을 유지한다



#### 시스템 권한 부여/회수

권한 부여

```sql
GRANT 권한 [컬럼 리스트] ON 객체 TO {사용자|역할|PUBLIC};
```

권한 회수

```sql
REVOKE {권한 리스트|ALL} ON 객체 FROM {사용자|역할|PUBLIC};
```



#### CASCADE 옵션

- CASCADE 옵션을 사용하면 참조하는 테이블도 같이 삭제된다

  ```sql
  DROP TABLE 인사 CASCADE;
  ```



#### 인덱스 생성

```sql
CREATE [UNIQUE] INDEX <index_name> ON <table_name> (<column(S)>);



#### 데이터베이스 장애

| 유형          | 내용                                                         |
| ------------- | ------------------------------------------------------------ |
| 트랜잭션 장애 | - 트랜잭션 애부에서 입력 데이터 오류, 불명확한 데이터, 시스템 자원 요구 과다 등 비정상적인 상황으로 <br />인해 트랜잭션 실행이 중지되는 현상<br />- 논리적 오류 : 내부적인 오류. 트랜잭션 완료 불가<br />- 시스템 오류 : DeadLock 등의 오류 조건으로 활성 트랜잭션 강제 종료 |
| 시스템 장애   | - 하드웨어 오동작, 소프트웨어 오류, 교착 사태 등에 의해 실행중인 모든 트랜잭션들이 더이상 실행 불가<br />- 전원, 하드웨어, 소프트웨어의 고장<br />- 시스템 장애로 인해 저장 내용이 영향 받지 않도록 무결성 체크 |
| 디스크 장애   | - 저장 장치 손상이나 디스크 헤드 충돌등에 의해  데이터베이스 일부/전부가 물리적으로 손상되는 경우<br />- 디스크 스토리지의 일부 또는 전체가 붕괴되는 경우<br />- 가장 최근 덤프와 로그를 이용하여 덤프 이후 완결된 트랜잭션 재실행 |
| 사용자 장애   | - 사용자의 실수, 무결성 규정 위반 등으로 질의 사항 실패<br />- 사용자들의 이해 부족으로 발생<br />- DBA가 데이터베이스 관리 하다가 발생하는 실수 |



#### 뷰(View)

- 허용된 자료만을 제한적으로 보여주기 위해 하나 이상의 테이블로부터 유도된 이름을 가지는 가상 테이블
- 장점
  - 논리적 독립성 제공
  - 사용자 데이터 관리 용이
  - 데이터 보안 용이
- 단점
  - 뷰 자체 인덱스 불가
  - 뷰 정의 변경 불가
  - 데이터 변겨 제약 존재
- 데이터 정의어(DDL)을 사용하여 생성, 삭제한다.
- 특징
  - 저장 장치내에 물리적으로 존재하지 않는다
  - 데이터 보정 등 임시적인 작업을 위한 용도로 사용
  - 기본 테이블과 같은 형태의 구조로 조작이 거의 비슷하다
  - 삽입, 내용 갱신에 제약이 따른다
  - 논리적 독립성을 제공한다
  - 독자적인 인덱스를 가질 수 없다
  - create를 이용하여 뷰를 생성한다
  - 필요한 데이터만 골라 뷰를 이용하여 처리한다



#### 해싱 함수 종류

- 계수 분석 : 키 값을 구성하는 숫자의 분포를 파악하여 분포가 비교적 고른 자리부터 필요한만큼 선택하여 레코드 주소를 결정하는 방법
- 제산법 : 키를 임의의 양의 정수로 나눈 나머지를 그 키의 레코드를 저장하는 주소로 결정하는 방법
- 중간 제곱법 : 키 값을 제곱한 값의 중간 부분을 선택하여 레코드 주소로 결정
- 폴딩법 : 키를 여러개로 나누고, 나누어진 각 부분을 더하거나 보수를 취해 레코드 주소를 결정하는 방법
- 기수 변환 : 주어진 키 값을 어떤 특정한 진법의 수로 간주하여 다른 진법으로 변환후 레코드 주소 구함
- 숫자 분석 : 각 숫자의 분포를 이용하여 균등한 분포의 숫자를 선택하여 사용
- 무작위 방법 : 난수를 발행