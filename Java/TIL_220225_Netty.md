# Netty

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/53a9d418-b8f4-4cd6-a004-254ef61d682d/Untitled.png)

Netty는  자바 네트워크 애플리케이션 프레임워크로 프로토콜 서버 및 클라이언트와 같은 네트워크 애플리케이션을 빠르고 쉽게 개발하는 것을 가능하게 해주는 NIO 클라이언트 서버 프레임워크입니다. 

기존의 소켓 프로그래밍은 클라이언트가 접속하게 되면 스레드를 할당해야 하는데(1:1) , 많은 클라이언트가 접속하게 될 경우 그 숫자만큼 스레드를 생성해야 해서 리소스 낭비로 이루어지고, 문맥 교환과 관련된 문제와 입출력 데이터 관련 무한 대기 현상이 발생하는 문제가 있었습니다. 

이러한 네트워크 문제 때문에 개발된 방법이 자바의 **NIO 방식(Non-Blocking Input Output)**입니다. 

네트워크 리소스 사용률을 세부적으로 제어하는 Non-Blocking 호출이 포함되어 있는 것으로, 내부적으로 시스템의 이벤트 통지 API를 이용해 논블로킹 소켓을 등록하면 해당 소켓의 정보를 확인할 수 있습니다. 즉, 무한 대기 현상을 회피할 수 있게 됩니다. 

클라이언트 당 스레드를 생성하지 않고, 필요할 때마다 스레드에게 통지를 하기 때문에 비동기적인 통신 구조를 갖춰 적은 수의 스레드로 더 많은 Connection을 취할 수 있어 메모리 관리에 이점이 생기고 컨텍스트 스위치에 대한 오버헤드가 줄어들게 되었습니다. 

또한, 최소화 된 스레드 생성으로 여유가 생긴 잉여 스레드를 다른 작업에 할당 할 수 있게 됩니다.

Netty는 단순히 네트워크 통신과 관련된 기능을 제공할 뿐만 아니라 일반적으로 네트워크 애플리케이션에서 사용하는 다양한 기능들을 포함하고 있습니다. 덕분에 개발자들은 네트워크 프로그래밍이나 멀티 스레드와 같은 처리보다 자신들의 비즈니스 로직에 좀 더 집중할 수 있게 되었습니다. 

## Netty 핵심 컴포넌트

- Channel
    - 하나 이상의 입출력 작업을 수행할 수 있는 하드웨어 장치, 파일, 네트워크 소켓, 프로그램 컴포넌트와 같은 엔티티에 대한 연결입니다. 쉽게 말해 인바운드 데이터와 아웃바운드 데이터를 위한 운송 수단이라고 생각하면 됩니다.
- Callback
    - 다른 메서드로 자신에 대한 참조를 제공할 수 있는 메서드입니다. 관심 대상에게 작업 완료를 알리는 가장 일반적인 방법 중 하나입니다. 네티는 이러한 콜백을 내부적으로 이벤트 처리에 사용합니다.
- Future
    - 작업이 완료되면 애플리케이션에게 알리는 방법입니다. 즉, 작업이 완료되는 미래의 어떤 시점에 그 결과에 접근할 수 있게 해줍니다. 하지만 자바의 Future는 결과를 얻기 위해서는 반드시 블로킹 해야 합니다. 그래서 Netty는 비동기 작업이 실행됐을 때 이용할 수 있는 자체 구현 ChannelFuture를 제공합니다.
- 이벤트와 핸들러
    - 이벤트를 변환하여 핸들러의 체인으로 이벤트를 처리합니다.

[https://narup.tistory.com/118](https://narup.tistory.com/118)

[https://hbase.tistory.com/116](https://hbase.tistory.com/116)

[https://coding-start.tistory.com/318](https://coding-start.tistory.com/318)
