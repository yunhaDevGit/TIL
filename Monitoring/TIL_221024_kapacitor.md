# Kapacitor

Kapacitor는 **실시간 스트리밍 데이터 처리 엔진**입니다.

Kapacitor를 사용하여 time series data를 가져와 데이터를 변환, 분석 및 처리합니다. 

Kapacitor를 사용하려면 Telegraf를 사용하여 시스템 메트릭을 수집하고 InfluxDB에 저장해야 합니다. 그 다음 Kapacitor를 사용하여 시스템 데이터를 처리합니다. 

## 개요

Kapacitor는 TICKscript 구문을 사용하여 데이터 집합에서 수행할 작업을 정의합니다. Kapacitor 작업은 아래의 내용을 포함합니다. 

- `stream` 작업 - stream 작업은 Kapacitor의 InfluxDB에 작성된 데이터를 복제합니다. 쿼리 오버 헤드를 줄이고 Kapacitor가 디스크에 데이터를 저장해야 합니다.
- `batch` 작업 - 일괄 작업은 지정된 간격 동안 데이터를 쿼리하고 처리합니다.

### Kapacitor 사용 이유?

******************************Action-oriented******************************

오늘날의 최신 애플리케이션에는 대시보드 및 운영자 경고 이상의 기능이 필요하며 작업을 트리거할 수 있는 기능이 필요합니다. Kapacitor의 경고 시스템은 **pub-sub 디자인 패턴**을 따릅니다. 경고는 `topics` 에 게시 되고  `handlers` 를 구독합니다. 이 pub/sub 모델과 사용자 정의 함수를 호출하는 기능을 통해 Kapacitor는 자동 크기 조정, 재고 재정렬 및 IoT 장치 제어와 같은 작업을 수행하여 환경에서 제어 평면 역할을 하는 매우 유연합니다.

**********Streaming analytics (스트리밍 분석)**********

Kapacitor는 스트리밍 데이터를 실시간으로 처리하도록 설계되었습니다. [InfluxDB](https://www.influxdata.com/time-series-platform/influxdb/) 로 데이터를 전송하기 전에 다운 샘플링 및 고급 분석을 수행하는 전처리기 및 Hadoop과 같은 데이터 저장소에 저장할 수 있는 후처리기 로 인프라 전반에 배포할 수 있습니다. 람다 식을 사용하여 스크립팅을 수행하여 데이터 포인트에 대한 변환을 정의하고 필터 역할을 하는 부울 조건을 정의할 수 있습니다.

**********************************Anomaly detection (이상 감지)**********************************

Kapacitor는 모든 이상 감지 엔진과 통합할 수 있는 간단한 플러그인 아키텍처 또는 인터페이스를 제공합니다. 이는 Kapacitor가 기계 학습 라이브러리, 패턴 일치 엔진, 규칙 엔진 등과 통합될 수 있음을 의미합니다. Kapacitor는 이러한 플러그인을 사용자 정의 함수로 처리하여 스트림을 임의의 함수에 양보하고 해당 함수의 출력에 대한 처리를 재개할 수 있는 유연성을 허용합니다. 이것은 Kapacitor를 전체 시스템을 자동화하는 사용자 정의 기능을 호출하는 강력한 제어 시스템으로 만듭니다.

## Kapacitor 알림

Kapacitor는 alert message를 두 가지 방법으로 보냅니다. 

- Alert 노드를 통해 노출된 이벤트 핸들러에 직접 push 될 수 있습니다.
- 하나 이상의 경고 처리기가 구독할 수 있는 topic 네임스페이스에 게시 될 수 있습니다.

Kapacitor를 사용하려면 핸들러는 configuration 파일을 설정 및 활성화 해야 합니다.
