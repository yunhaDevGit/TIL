# SSL

#### SSL 디지털 인증서

- 클라이언트와 서버간의 통신을 제3자가 보증해주는 전자화된 문서

- 웹 브라우저가 서버에 접속 한 직후, 클라이언트(웹 브라우저)에게 인증서 정보를 전달한다. 웹 즈라우저는 그 인증서를 보고 그 인증서를 자신에게 돌려준 웹서버가 자신이 접속하려고 했던 진짜 웹 서버인지를 확인하는 것과 같은 과정을 통해 상호간의 신뢰 관계를 형성한다.

- 인증과 같은 역할을 해준다

  - 통신 내용이 공격자에게 노출되는 것을 막을 수 있다.

    그러기 위해서는 **암호화**가 필요하다. 

    (중간에 누군가 정보를 가로채더라도 그 정보를 해석할 수 없도록 해야 한다)



### 암호화 방식

#### 대칭키 암호화 방식

- 암호화를 하는 쪽과 복호화를 하는 쪽이 모두 **같은 키를 가지고 있어야 한다**

- 어떤 문서를 A라는 key로 암호화를 하였을 경우, 해당 문서를 복호화 할 때에도 A라는 key를 사용해야 한다.

- 예시

  ```
  openssl enc -e -des3 -salt -in plaintext.txt -out ciphertext.bin enc -e des3
  ```

  platintext.txt를 가지고 와서 des3 방식으로 암호화를 한 결과를 ciphertext.bin으로 출력하겠다.

  

- 자기가 혼자서 가지고 있는 키로 정보를 암호화 할 때 사용하는 방법이다. 현실에서 노출되어선 안되는 정보를 암호화 할 때 사용.

- 단점

  - Key를 전송하다가 노출될 위험이 있다
  - Key 값이 노출되었다면 누구나 그 키 값을 가지고 우리가 암호화 한 것을 복호화 할 수 있다.

  

  ex) 만약 ciphertext.bin을 먼 곳에 전송한다고 하자. 그러면 그만큼 경유지가 많아지고, 경유지가 많아진다는 것은 ciphertext.bin의 내용이 다른 사람에게 노출될 위험이 커진다는 뜻이다.

  하지만 ciphertext.bin 내용 자체는 암호화가 되어 있어 누군가가 해독하는 것이 어렵거나 불가능하다. 

  문제는 **암호화 된 파일을 복호화 하려면 key 값을 알아야 하는데, **그 뜻은 멀리 있는 사람에게 key 값을 전달해야 한다는 것이다. key는 암호화가 되어 있지 않기 때문에 노출되었을 경우 해당 key 값을 가지고 암호화 한 것들을 전부 복호화 할 수 있다는 치명적인 문제가 발생할 수 있다.

  



#### 공개키 암호화 방식

- 대칭키 방식을 개선하고, 대칭키가 할 수 없던 일을 한다

- 공개키 암호화 : 공개키로 암호화하면 개인키로만 복호화 할 수 있다(개인키는 나만 가지고 있으므로, 나만 볼 수 있다)

  개인키 암호화 : 개인키로 암호화하면 공개키로만 복호화 할 수 있다(공개키는 모두에게 공개되어 있으므로, 내가 인증한 정보임을 알려 신뢰성을 보장할 수 있다)

- 대칭키 : 암호화, 복호화 키가 동일하다
  공개키 : 키가 두개다(개인키, 공개키)

- 예시

  ```
  openssl genrsa -out private.key 2048
  // rsa 방식으로 private key를 생성한다
  // 2048 : 암호의 복잡도. 값이 높아질수록 안정성이 높아지지만 더 많은 컴퓨팅 파워 필요
  
  openssl rsa -in private.pem -out public.pem -outform PEM -pubout
  // private.pem을 가지고 와서 public.pem이라는 공개키를  rsa 방식으로 만든다. 
  
  openssl rsautl -encrypt -inkey public.pem -pubin -in file.txt -out file.ssl
  // openssl을 사용하여 암호화를 하는데 key로 public.pem을 사용하겠다.
  // (공개키를 가지고 있는 사람이 암호화. 즉, 비공개 키를 가지고 있는 사람에게 어떤 정보를 전송할 때 사용)
  // file.txt를 암호화 할거고, 암호화 된 결과는 file.ssl이라는 파일로 암호화된 파일을 만들겠다.
  
  openssl rsautl -decrypt -inkey private.pem -in file.ssl -out decrypted.txt
  // -decrypt : 복호화 하겠다.
  ```

  







https://opentutorials.org/course/228/4894